# HearO Web - í”„ë¦¬ë Œë”ë§ íŒŒì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸

## ê°œìš”
- ì´ ìš´ë™ ìˆ˜: 22ê°œ (í•˜ì²´ 6, ìƒì²´ 4, ì½”ì–´ 4, ì† 8)
- ì„¸ê³„ê´€: 6ê°œ (fantasy, sports, idol, sf, zombie, spy)
- ë“±ê¸‰: 3ê°œ (perfect, good, normal)
- TTS íŒŒì¼ ì´ í•„ìš” ìˆ˜: 22 Ã— 6 Ã— 3 = **396ê°œ**

---

## 1. TTS ì˜¤ë””ì˜¤ íŒŒì¼ í˜„í™©

### âœ… ë³µì‚¬ ì™„ë£Œ (HearO-v2ì—ì„œ ê°€ì ¸ì˜¨ íŒŒì¼)
16ê°œ ìš´ë™ Ã— 6ê°œ ì„¸ê³„ê´€ Ã— 3ë“±ê¸‰ = **288ê°œ íŒŒì¼**

| ì¹´í…Œê³ ë¦¬ | ìš´ë™ ID | í•œê¸€ëª… | ìƒíƒœ |
|---------|--------|-------|------|
| í•˜ì²´ | squat | ìŠ¤ì¿¼íŠ¸ | âœ… ì™„ë£Œ |
| í•˜ì²´ | wall_squat | ë²½ ìŠ¤ì¿¼íŠ¸ | âœ… ì™„ë£Œ |
| í•˜ì²´ | chair_stand | ì˜ì ê¸°ë¦½ | âœ… ì™„ë£Œ |
| í•˜ì²´ | straight_leg_raise | ë‹¤ë¦¬ ë“¤ê¸° | âœ… ì™„ë£Œ |
| í•˜ì²´ | standing_march_slow | ì œìë¦¬ í–‰ì§„ | âœ… ì™„ë£Œ |
| í•˜ì²´ | seated_knee_lift | ë¬´ë¦ ë“¤ê¸° | âœ… ì™„ë£Œ |
| ì½”ì–´ | seated_core_hold | ì½”ì–´ ë²„í‹°ê¸° | âœ… ì™„ë£Œ |
| ì½”ì–´ | standing_anti_extension_hold | í—ˆë¦¬ ë²„í‹°ê¸° | âœ… ì™„ë£Œ |
| ì½”ì–´ | standing_arm_raise_core | ì½”ì–´ íŒ” ë“¤ê¸° | âœ… ì™„ë£Œ |
| ì½”ì–´ | bridge | ë¸Œë¦¿ì§€ | âœ… ì™„ë£Œ |
| ì† | finger_flexion | ì†ê°€ë½ êµ½íˆê¸° | âœ… ì™„ë£Œ |
| ì† | finger_spread | ì†ê°€ë½ ë²Œë¦¬ê¸° | âœ… ì™„ë£Œ |
| ì† | wrist_flexion | ì†ëª© êµ½íˆê¸° | âœ… ì™„ë£Œ |
| ì† | tendon_glide | í˜ì¤„ ê¸€ë¼ì´ë”© | âœ… ì™„ë£Œ |
| ì† | thumb_opposition | ì—„ì§€ í„°ì¹˜ | âœ… ì™„ë£Œ |
| ì† | grip_squeeze | ì£¼ë¨¹ ì¥ê¸° | âœ… ì™„ë£Œ |

### âŒ ìƒì„± í•„ìš” (HearO_web ì‹ ê·œ ìš´ë™)
6ê°œ ìš´ë™ Ã— 6ê°œ ì„¸ê³„ê´€ Ã— 3ë“±ê¸‰ = **108ê°œ íŒŒì¼ í•„ìš”**

| ì¹´í…Œê³ ë¦¬ | ìš´ë™ ID | í•œê¸€ëª… | ìš°ì„ ìˆœìœ„ |
|---------|--------|-------|---------|
| ìƒì²´ | standing_arm_raise_front | íŒ” ì•ìœ¼ë¡œ ë“¤ê¸° | ğŸ”´ ë†’ìŒ |
| ìƒì²´ | shoulder_abduction | ì–´ê¹¨ ë²Œë¦¬ê¸° | ğŸ”´ ë†’ìŒ |
| ìƒì²´ | elbow_flexion | íŒ”ê¿ˆì¹˜ êµ½íˆê¸° | ğŸ”´ ë†’ìŒ |
| ìƒì²´ | wall_push | ë²½ ë°€ê¸° | ğŸ”´ ë†’ìŒ |
| ì† | pinch_hold | ì§‘ê²Œ ì§‘ê¸° | ğŸŸ¡ ì¤‘ê°„ |
| ì† | finger_tap_sequence | ì†ê°€ë½ ìˆœì„œ í„°ì¹˜ | ğŸŸ¡ ì¤‘ê°„ |

---

## 2. ìŠ¤í† ë¦¬ í…ìŠ¤íŠ¸ íŒŒì¼ í˜„í™©

### íŒŒì¼ ìœ„ì¹˜
`public/assets/prerendered/stories/all_stories.json`

### í˜„í™©
- âœ… ê¸°ì¡´ 16ê°œ ìš´ë™ ìŠ¤í† ë¦¬ ë³µì‚¬ ì™„ë£Œ
- âŒ ì‹ ê·œ 6ê°œ ìš´ë™ ìŠ¤í† ë¦¬ ì¶”ê°€ í•„ìš”

### ìŠ¤í† ë¦¬ ì¶”ê°€ í•„ìš” ëª©ë¡
ê° ìš´ë™ë³„ë¡œ 6ê°œ ì„¸ê³„ê´€ Ã— 3ë“±ê¸‰ = 18ê°œ ìŠ¤í† ë¦¬ í•„ìš”
ì´ 6ê°œ ìš´ë™ Ã— 18ê°œ = **108ê°œ ìŠ¤í† ë¦¬ í…ìŠ¤íŠ¸ ì¶”ê°€ í•„ìš”**

---

## 3. NPC ì´ë¯¸ì§€ íŒŒì¼ í˜„í™©

### íŒŒì¼ êµ¬ì¡°
```
public/assets/prerendered/npc/
â”œâ”€â”€ fantasy/
â”‚   â”œâ”€â”€ elderlin/     (í˜„ì ì—˜ë”ë¦°)
â”‚   â”œâ”€â”€ serena/
â”‚   â”œâ”€â”€ kairon/
â”‚   â”œâ”€â”€ lunaria/
â”‚   â””â”€â”€ narrator/
â”œâ”€â”€ sports/
â”‚   â”œâ”€â”€ coach_park/   (ì½”ì¹˜ ë°•)
â”‚   â”œâ”€â”€ jiyeon/
â”‚   â”œâ”€â”€ rival_kim/
â”‚   â”œâ”€â”€ physio_lee/
â”‚   â””â”€â”€ narrator/
â”œâ”€â”€ idol/
â”‚   â”œâ”€â”€ manager_sujin/ (ë§¤ë‹ˆì € ìˆ˜ì§„)
â”‚   â”œâ”€â”€ haru/
â”‚   â”œâ”€â”€ producer_jang/
â”‚   â”œâ”€â”€ vocal_trainer/
â”‚   â””â”€â”€ narrator/
â”œâ”€â”€ sf/
â”‚   â”œâ”€â”€ aria/          (AI ì•„ë¦¬ì•„)
â”‚   â””â”€â”€ ... (ì¶”ê°€ í•„ìš”)
â”œâ”€â”€ zombie/
â”‚   â”œâ”€â”€ dr_lee/        (ë‹¥í„° ë¦¬)
â”‚   â””â”€â”€ ... (ì¶”ê°€ í•„ìš”)
â””â”€â”€ spy/
    â”œâ”€â”€ handler_omega/ (í•¸ë“¤ëŸ¬ ì˜¤ë©”ê°€)
    â””â”€â”€ ... (ì¶”ê°€ í•„ìš”)
```

### í˜„í™©
- âœ… fantasy, sports, idol NPC ì´ë¯¸ì§€ ì™„ë£Œ
- âš ï¸ sf, zombie, spy NPC ì´ë¯¸ì§€ í™•ì¸ í•„ìš”

---

## 4. TTS ìƒì„± ìŠ¤í¬ë¦½íŠ¸ ì„¤ì •

### Gemini TTS ìŒì„± ì„¤ì • (HearO-v2ì™€ ë™ì¼)

**ì¤‘ìš”**: HearO-v2ëŠ” Gemini 2.5 Flash TTSë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê¸°ì¡´ íŒŒì¼ê³¼ ì¼ê´€ì„±ì„ ìœ„í•´ ë°˜ë“œì‹œ ë™ì¼í•œ ì„¤ì •ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

| ì„¸ê³„ê´€ | Gemini ìŒì„± | ìºë¦­í„° | ê¸°ë³¸ ì†ë„ |
|-------|------------|-------|----------|
| fantasy | Zubenelgenubi | í˜„ì ì—˜ë”ë¦° | 0.85 |
| sports | Algieba | ì½”ì¹˜ ë°• | 1.05 |
| idol | Achernar | ë§¤ë‹ˆì € ìˆ˜ì§„ | 1.0 |
| sf | Autonoe | AI ì•„ë¦¬ì•„ | 1.05 |
| zombie | Enceladus | ë‹¥í„° ë¦¬ | 1.08 |
| spy | Charon | í•¸ë“¤ëŸ¬ ì˜¤ë©”ê°€ | 0.88 |

### ë“±ê¸‰ë³„ ìŠ¤íƒ€ì¼ ì„¤ì •

| ë“±ê¸‰ | ìŠ¤íƒ€ì¼ ì ‘ë‘ì‚¬ |
|-----|-------------|
| perfect | `[Dramatic, theatrical delivery]` |
| good | `[Soft, gentle voice]` ë˜ëŠ” `[Expressive, emotive tone]` |
| normal | `[Expressive, emotive tone]` ë˜ëŠ” `[Energetic, upbeat tone]` |

### Gemini TTS API ì„¤ì •
- **Primary ëª¨ë¸**: `gemini-2.5-flash-preview-tts` (ë¹ ë¥´ê³  ì €ë ´)
- **Fallback ëª¨ë¸**: `gemini-2.5-pro-preview-tts` (Rate limit ì‹œ)
- **ê¸°ë³¸ ìŒì„±**: `Kore` (í•œêµ­ì–´ ìµœì í™”) - ì„¸ê³„ê´€ë³„ë¡œ ë‹¤ë¥¸ ìŒì„± ì‚¬ìš©
- **ì¶œë ¥ í˜•ì‹**: PCM â†’ WAV (24000Hz, 16bit, mono)

---

## 5. ìƒì„± ìš°ì„ ìˆœìœ„

### Phase 1: ìƒì²´ ìš´ë™ TTS + ìŠ¤í† ë¦¬ (MVP í•„ìˆ˜)
1. standing_arm_raise_front (íŒ” ì•ìœ¼ë¡œ ë“¤ê¸°)
2. shoulder_abduction (ì–´ê¹¨ ë²Œë¦¬ê¸°)
3. elbow_flexion (íŒ”ê¿ˆì¹˜ êµ½íˆê¸°)
4. wall_push (ë²½ ë°€ê¸°)

**ì˜ˆìƒ íŒŒì¼ ìˆ˜**: 4 Ã— 6 Ã— 3 = 72ê°œ TTS + 72ê°œ ìŠ¤í† ë¦¬

### Phase 2: ì† ì¬í™œ ì¶”ê°€ ìš´ë™ TTS + ìŠ¤í† ë¦¬
1. pinch_hold (ì§‘ê²Œ ì§‘ê¸°)
2. finger_tap_sequence (ì†ê°€ë½ ìˆœì„œ í„°ì¹˜)

**ì˜ˆìƒ íŒŒì¼ ìˆ˜**: 2 Ã— 6 Ã— 3 = 36ê°œ TTS + 36ê°œ ìŠ¤í† ë¦¬

---

## 6. íŒŒì¼ ë„¤ì´ë° ê·œì¹™

### TTS íŒŒì¼
```
/assets/prerendered/tts/{worldview}/{exercise}_{grade}.wav

ì˜ˆì‹œ:
/assets/prerendered/tts/fantasy/standing_arm_raise_front_perfect.wav
/assets/prerendered/tts/sports/shoulder_abduction_good.wav
```

### ìŠ¤í† ë¦¬ JSON êµ¬ì¡°
```json
{
  "fantasy": {
    "standing_arm_raise_front": {
      "perfect": "ìœ„ëŒ€í•œ ìš©ì‚¬ì—¬, ...",
      "good": "ì˜í–ˆì–´ìš”, ...",
      "normal": "ì¢‹ì€ ì‹œì‘ì´ì—ìš”, ..."
    }
  }
}
```

---

## 7. ìƒì„± ë„êµ¬

### TTS ìƒì„± (Gemini TTS í•„ìˆ˜)
**ì¤‘ìš”**: HearO-v2ì—ì„œ ë³µì‚¬í•œ ê¸°ì¡´ TTS íŒŒì¼ì€ Gemini TTSë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
ì‹ ê·œ íŒŒì¼ë„ ë°˜ë“œì‹œ Gemini TTSë¥¼ ì‚¬ìš©í•´ì•¼ ìŒì„± ì¼ê´€ì„±ì´ ìœ ì§€ë©ë‹ˆë‹¤.

1. **Gemini 2.5 Flash TTS** (í•„ìˆ˜)
   - HearO-v2 ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©: `scripts/generate_tts_gemini.py`
   - ê°ì • í‘œí˜„ í–¥ìƒ (expressive, dramatic, gentle, energetic)
   - ì„¸ê³„ê´€ë³„ ìºë¦­í„° ìŒì„± ì¼ê´€ì„±

2. **API í˜¸ì¶œ ë°©ì‹**
   ```python
   # í™˜ê²½ë³€ìˆ˜ ì„¤ì •
   export GEMINI_API_KEY=your_api_key

   # ì „ì²´ ìƒì„±
   python generate_tts_gemini.py

   # íŠ¹ì • ì„¸ê³„ê´€ë§Œ
   python generate_tts_gemini.py --worldview fantasy

   # ì‹¤íŒ¨í•œ í•­ëª© ì¬ì‹œë„
   python generate_tts_gemini.py --retry-failed
   ```

### ìŠ¤í† ë¦¬ ìƒì„± (Gemini API)
1. **Gemini 3 Pro** (ê¶Œì¥)
   - Edge Function: `generate-story`
   - í´ë°±: Gemini 2.5 Pro
   - ì„¸ê³„ê´€ë³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©

2. **ìˆ˜ë™ ì‘ì„±**
   - ê¸°ì¡´ ìŠ¤í† ë¦¬ ìŠ¤íƒ€ì¼ ì°¸ê³ 
   - `all_stories.json` í˜•ì‹ ì¤€ìˆ˜

---

## 8. ì§„í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] HearO-v2ì—ì„œ ê¸°ì¡´ íŒŒì¼ ë³µì‚¬
- [x] prerenderedContentService.ts ìƒì„±
- [x] storyAgents.ts ì„¤ì • íŒŒì¼ ìƒì„±
- [x] aiGateway.ts ì„œë¹„ìŠ¤ ìƒì„±
- [ ] ì‹ ê·œ ìš´ë™ ìŠ¤í† ë¦¬ í…ìŠ¤íŠ¸ ì‘ì„±
- [ ] ì‹ ê·œ ìš´ë™ TTS ìƒì„±
- [ ] all_stories.jsonì— ì‹ ê·œ ìŠ¤í† ë¦¬ ì¶”ê°€
- [ ] NPC ì´ë¯¸ì§€ ë³´ì™„ (sf, zombie, spy)

---

## ì—…ë°ì´íŠ¸ ê¸°ë¡
- 2025-01-23: ì´ˆê¸° ë¬¸ì„œ ìƒì„±, HearO-v2 íŒŒì¼ ë³µì‚¬ ì™„ë£Œ
- 2025-01-23: TTS ì„¤ì • ìˆ˜ì • - Azure â†’ Gemini TTS (HearO-v2ì™€ ë™ì¼í•˜ê²Œ)
